<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="utf-8" />
	<title>Welcome</title>
	<meta content="width=device-width, initial-scale=1.0" name="viewport" />
	<!-- 引入 Swiper 样式 -->
	<link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
	<!-- 对于不依赖 DOM 顺序的脚本使用 async -->
	<script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7976057848601572"
		async></script>
	<!-- Google Tag Manager -->
	<script>
		(function (w, d, s, l, i) {
			w[l] = w[l] || [];
			w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
			var f = d.getElementsByTagName(s)[0],
				j = d.createElement(s),
				dl = l != 'dataLayer' ? '&l=' + l : '';
			j.async = true;
			j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
			f.parentNode.insertBefore(j, f);
		})(window, document, 'script', 'dataLayer', 'GTM-TS48XJVF');
	</script>
	<!-- End Google Tag Manager -->

	<style>
		body {
			font-family: Arial, sans-serif;
			margin: 0;
			padding: 0;
			text-align: center;
		}

		.container {
			text-align: center;
		}

		.title {
			color: red;
			padding: 10px;
			border-radius: 4px;
			font-size: 54px;
			margin-bottom: 5px;
			display: flex;
			align-items: center;
			justify-content: center;
		}

		.title img {
			margin-right: 10px;
			height: 24px;
			width: auto;
		}

		.gradient-box {
			background: linear-gradient(to right, #ff7e5f, #feb47b);
			height: 10px;
			margin-bottom: 10px;
		}

		/* 轮播图样式 */
		.swiper-container {
			width: 800px;
			height: 400px;
			margin: 0 auto;
			position: relative;
		}

		.swiper-slide {
			text-align: center;
		}

		.swiper-slide img {
			width: 100%;
			height: 100%;
			object-fit: cover;
		}

		.swiper-button-prev,
		.swiper-button-next {
			color: #fff;
		}

		.swiper-pagination-bullet {
			background: rgba(0, 0, 0, 0.5);
		}

		.swiper-pagination-bullet-active {
			background: #fff;
		}

		.content-section {
			margin: 20px 0;
			text-align: left;
			padding: 0 15px;
		}

		.content-section h2 {
			color: #333;
		}

		.content-section p {
			color: #666;
			line-height: 1.5;
		}

		.header {
			margin: 20px 0;
		}

		.search-bar {
			display: flex;
			justify-content: center;
			align-items: center;
			margin-bottom: 20px;
		}

		.tab-select,
		.search-input {
			padding: 8px;
			cursor: pointer;
			border: 1px solid #ccc;
			margin: 0 5px;
			width: 100%;
			max-width: 180px;
			font-size: 16px;
			border-radius: 20px;
		}

		.thumbnail-container {
			display: flex;
			flex-wrap: wrap;
			justify-content: center;
			gap: 10px;
		}

		.thumbnail {
			width: 30%;
			aspect-ratio: 3 / 4;
			display: flex;
			flex-direction: column;
			justify-content: center;
			align-items: center;
			cursor: pointer;
			background-color: transparent;
			border: none;
			border-radius: 10px;
			overflow: hidden;
			margin-bottom: 15px;
		}

		.thumbnail-title {
			margin-top: 5px;
			font-size: 18px;
		}

		.thumbnail img {
			max-width: 90%;
			max-height: 90%;
			border-radius: 10px;
			object-fit: cover;
		}

		.subtitle {
			color: #e21111;
			padding: 10px;
			font-size: 20px;
			display: flex;
			align-items: center;
			justify-content: center;
			margin: 0px 0;
		}

		.subtitle img {
			margin-right: 8px;
			height: 24px;
			width: auto;
		}

		.hidden {
			display: none;
		}

		/* 视频弹窗样式 */
		.modal {
			display: none;
			position: fixed;
			z-index: 1000;
			left: 0;
			top: 0;
			width: 100%;
			height: 100%;
			background-color: rgba(0, 0, 0, 0.7);
		}

		.modal-content {
			position: absolute;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			background: #fff;
			padding: 20px;
			border-radius: 8px;
		}

		.close {
			position: absolute;
			top: 10px;
			right: 20px;
			font-size: 24px;
			cursor: pointer;
		}

		/* PC 端已有的媒体查询 */
		@media (max-width: 600px) {

			/* 轮播图：宽度自适应屏幕、采用固定高宽比（例如16:9） */
			.swiper-container {
				width: 100%;
				height: auto;
				aspect-ratio: 16/9;
			}

			/* 缩略图两列展示，宽度调整为接近 50% */
			.thumbnail {
				width: calc(50% - 10px);
				aspect-ratio: 3 / 4;
				/* 保持原有比例 */
			}

			.thumbnail img {
				max-width: 100%;
				max-height: 100%;
			}

			/* 视频弹窗内容调整 */
			.modal-content {
				width: 95%;
				max-width: 400px;
				padding: 10px;
			}

			/* 视频自适应屏幕，最大高度不超过屏幕 */
			#videoPlayer {
				width: 100% !important;
				height: auto !important;
				max-height: 90vh;
			}

			/* 标题和副标题字体减小 */
			.title {
				font-size: 24px;
			}

			.subtitle {
				font-size: 16px;
			}

			/* 搜索框、Tab 下拉框字体减小 */
			.tab-select,
			.search-input {
				font-size: 14px;
				max-width: 140px;
				padding: 6px;
			}

			/* Swiper 导航按钮尺寸缩小 */
			.swiper-button-prev,
			.swiper-button-next {
				width: 30px;
				height: 30px;
			}

			/* 若需要图标整体缩放，也可添加 transform 缩放 */
			/* 例如：.title img, .subtitle img { transform: scale(0.8); } */
		}
	</style>
</head>

<body>
	<!-- Google Tag Manager (noscript) -->
	<script>
		window.addEventListener('load', function () {
			var gtm = document.createElement('script');
			gtm.src = 'https://www.googletagmanager.com/gtm.js?id=GTM-TS48XJVF';
			gtm.async = true;
			document.body.appendChild(gtm);
		});
	</script>
	<!-- End Google Tag Manager (noscript) -->

	<div class="container">
		<div class="title">
			<img alt="Icon" src="hot.webp" />
			Hot Drama
		</div>
		<div class="gradient-box"></div>
		<!-- 轮播图 -->
		<div class="swiper-container">
			<div class="swiper-wrapper">
				<div class="swiper-slide">
					<a href="https://short.kalostv.com/api/short/jump/675c53f73a3c9" target="_blank">
						<img alt="Image 1" src="ii1.webp" />
					</a>
				</div>
				<div class="swiper-slide">
					<a href="https://short.kalostv.com/api/short/jump/675c534ac599d" target="_blank">
						<img alt="Image 2" src="ii2.webp" />
					</a>
				</div>
				<div class="swiper-slide">
					<a href="https://short.kalostv.com/api/short/jump/675c531156f4f" target="_blank">
						<img alt="Image 3" src="ii3.webp" />
					</a>
				</div>
				<div class="swiper-slide">
					<a href="https://short.kalostv.com/api/short/jump/675c53f73a3c9" target="_blank">
						<img alt="Image 4" src="ii4.webp" />
					</a>
				</div>
				<div class="swiper-slide">
					<a href="https://short.kalostv.com/api/short/jump/675c8297121ed" target="_blank">
						<img alt="Image 5" src="ii5.webp" />
					</a>
				</div>
				<div class="swiper-slide">
					<a href="https://short.kalostv.com/api/short/jump/675c52b1b2dd8" target="_blank">
						<img alt="Image 6" src="ii6.webp" />
					</a>
				</div>
			</div>
			<!-- 左右导航按钮 -->
			<div class="swiper-button-prev"></div>
			<div class="swiper-button-next"></div>
			<!-- 分页器 -->
			<div class="swiper-pagination"></div>
		</div>

		<!-- 新内容区域 -->
		<div class="subtitle">
			<img alt="Icon" src="search.webp" />
			Search More Drama
		</div>
		<div class="gradient-box"></div>
		<div class="content-section">
			<div class="search-bar">
				<select class="tab-select" id="tabSelect" onchange="changeTab(this.value)">
					<option value="0">English</option>
					<option value="1">Indonesian</option>
					<option value="2">Spanish</option>
					<option value="3">French</option>
					<option value="4">Korean</option>
					<option value="5">Japanese</option>
					<option value="6">German</option>
					<option value="7">Thai</option>
					<option value="8">Traditional Chinese</option>
				</select>
				<input class="search-input" id="searchInput" onkeyup="filterThumbnails()" placeholder="Search Drama"
					type="text" />
			</div>
			<div class="thumbnail-container" id="thumbnailContainer">
			</div>
			<div style="text-align:center; margin: 20px;">
				<button id="loadMoreBtn">Load More</button>
			</div>
			<script>
				function changeTab(selectedValue) {
					currentTab = selectedValue;
					const container = document.getElementById("thumbnailContainer");
					container.innerHTML = "";
					loadedCounts[selectedValue] = 0;
					loadThumbnails(selectedValue);
				}
			</script>
		</div>
	</div>

	<!-- 视频弹窗 -->
	<div class="modal" id="videoModal">
		<div class="modal-content">
			<span class="close">×</span>
			<video controls id="videoPlayer">
				<source id="videoSource" src="" type="video/mp4" />
				您的浏览器不支持 video 标签。
			</video>
		</div>
	</div>

	<!-- 引入剧集数据 -->
	<script src="thumbnailsData.js"></script>

	<!-- 全局变量定义 -->
	<script>
		let currentTab = "1";
		const batchSize = 50;
		const loadedCounts = {};
	</script>

	<!-- 按批次加载函数 -->
	<script>
		function loadThumbnails(tab) {
			const container = document.getElementById("thumbnailContainer");
			if (!loadedCounts[tab]) {
				loadedCounts[tab] = 0;
			}
			const startIndex = loadedCounts[tab];
			const thumbnailsArray = thumbnailsData[tab] || [];
			const endIndex = Math.min(startIndex + batchSize, thumbnailsArray.length);
			for (let i = startIndex; i < endIndex; i++) {
				const tempDiv = document.createElement("div");
				tempDiv.innerHTML = thumbnailsArray[i];
				container.appendChild(tempDiv.firstElementChild);
			}
			loadedCounts[tab] = endIndex;
			const loadMoreBtn = document.getElementById("loadMoreBtn");
			loadMoreBtn.style.display = loadedCounts[tab] >= thumbnailsArray.length ? "none" : "block";
		}
	</script>

	<!-- 改进后的语言切换函数 -->
	<script>
		function changeTab(selectedValue) {
			currentTab = selectedValue;
			const container = document.getElementById("thumbnailContainer");
			container.innerHTML = "";
			loadedCounts[selectedValue] = 0;
			loadThumbnails(selectedValue);
		}
	</script>

	<script>
		document.addEventListener("DOMContentLoaded", function () {
			// 加载默认语言的第一批剧集数据
			loadThumbnails(currentTab);
			// “Load More” 按钮点击事件
			document.getElementById("loadMoreBtn").addEventListener("click", function () {
				loadThumbnails(currentTab);
			});
			// 事件委托：处理缩略图点击（视频弹窗）
			document.getElementById("thumbnailContainer").addEventListener("click", function (event) {
				const link = event.target.closest(".thumbnail a");
				if (link) {
					if (event.target.closest(".thumbnail-title")) {
						return;
					}
					event.preventDefault();
					const thumbnailEl = link.closest(".thumbnail");
					const videoUrl = thumbnailEl.getAttribute("data-video");
					if (videoUrl) {
						document.getElementById("videoSource").src = videoUrl;
						document.getElementById("videoPlayer").load();
						document.getElementById("videoModal").style.display = "block";
					}
				}
			});
			// 关闭视频弹窗（点击关闭按钮）
			document.querySelector(".close").addEventListener("click", function () {
				document.getElementById("videoModal").style.display = "none";
				document.getElementById("videoPlayer").pause();
				document.getElementById("videoSource").src = "";
			});
			// 点击弹窗背景关闭弹窗
			document.getElementById("videoModal").addEventListener("click", function (event) {
				if (event.target === this) {
					this.style.display = "none";
					document.getElementById("videoPlayer").pause();
					document.getElementById("videoSource").src = "";
				}
			});
		});
	</script>

	<!-- 引入 Swiper 脚本 -->
	<script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
	<script>
		var mySwiper = new Swiper('.swiper-container', {
			loop: true,
			autoplay: {
				delay: 1500,
				disableOnInteraction: true,
			},
			navigation: {
				nextEl: '.swiper-button-next',
				prevEl: '.swiper-button-prev',
			},
			pagination: {
				el: '.swiper-pagination',
				clickable: true,
			},
			speed: 1000,
		});
	</script>
</body>

</html>